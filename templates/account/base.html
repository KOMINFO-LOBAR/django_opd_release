{% load static %} {% get_media_prefix as media_prefix %} {% get_static_prefix as static_prefix %} <!DOCTYPE html> <html lang=en-us  {% block extra-page %}{% endblock %}> <title>{% block title-page %}{% endblock %}</title> {% include "account/inc-meta.html" %} {% include "account/inc-link.html" %} {% block custom-style %}{% endblock %} <link rel=stylesheet  type="text/css" media=screen  href="{% static 'account/css/custom.css' %}"> <body class=""> {% block header %}{% endblock %} {% block left-panel %}{% endblock %} {% block content %}{% endblock %} {% block footer %}{% endblock %} {% block shortcut %}{% endblock %} {% block scripts %}{% endblock %} <script src="{% static 'account/js/custom.js' %}?v=20250713a"></script> <script> $(document).ready(function () { {% if auto_resize %} let auto_resize = true; {% else %} let auto_resize = false; {% endif %} $("#id_photo-file_path").on("change", function () { if (auto_resize) { alert('auto resize!!'); } else { if (this.files && this.files[0]) { console.log('inside trigger photo'); var reader = new FileReader(); reader.onload = function (e) { $("#image").attr("src", e.target.result); $("#form-id").val("photo"); $("#modalCrop").modal("show"); } reader.readAsDataURL(this.files[0]); } } }); $("#id_form-0-file_path").on("change", function () { this.enable = false; if (auto_resize) { const file = event.target.files[0]; if (file && file.type.startsWith('image/')) { console.log('Valid image file selected:', file.name); console.log('Image Before Resize', event.target.files[0]); resizeImage(file, 800, 600, (resizedBlob) => { console.log('Resized image blob:', resizedBlob); const resizedFile = new File([resizedBlob], file.name, { type: file.type }); const dataTransfer = new DataTransfer(); dataTransfer.items.add(resizedFile); this.files = dataTransfer.files; }); } else { alert('Please select a valid image file.'); event.target.value = ''; }; alert('Complete auto resize!!'); } else { if (this.files && this.files[0]) { console.log('inside trigger photo 0'); var reader = new FileReader(); reader.onload = function (e) { $("#image").attr("src", e.target.result); $("#form-id").val("form-0"); $("#modalCrop").modal("show"); } reader.readAsDataURL(this.files[0]); } } }); $("#id_form-1-file_path").on("change", function () { if (auto_resize) { alert('complete auto resize!!'); } else { if (this.files && this.files[0]) { var reader = new FileReader(); reader.onload = function (e) { $("#image").attr("src", e.target.result); $("#form-id").val("form-1"); $("#modalCrop").modal("show"); } reader.readAsDataURL(this.files[0]); } } }); $("#id_form-2-file_path").on("change", function () { if (auto_resize) { alert('auto resize!!'); } else { if (this.files && this.files[0]) { var reader = new FileReader(); reader.onload = function (e) { $("#image").attr("src", e.target.result); $("#form-id").val("form-2"); $("#modalCrop").modal("show"); } reader.readAsDataURL(this.files[0]); } } }); }); </script>