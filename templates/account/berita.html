{% extends "account/base-dashboard.html" %} {% load static %} {% load humanize %} {% block content %} <div id=main  role=main > <div id=ribbon > <span class=ribbon-button-alignment > <span id=refresh  class="btn btn-ribbon" data-action=resetWidgets  data-title=refresh  rel=tooltip  data-placement=bottom  data-original-title="<i class='text-warning fa fa-warning'></i> Warning! This will reset all your widget settings." data-html="true"> <i class="fa fa-refresh"></i> </span> </span> <ol class=breadcrumb > <li>Selamat Datang, {{ user.username|default:'Guest'|title }} - [ {{namaOPD}} ] </ol> </div> <div id=content > <div class=row > <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4"> <h1 class="page-title txt-color-blueDark"> {% for i in menu_aktif %} {% if i.icon != '' %} <i class="fa-fw fa fa-{{i.icon}}"></i> {% else %} <i class="fa-fw fa fa-home"></i> {% endif %} {{i.nama}} <span>> Grid </span> {% endfor %} </h1> </div> </div> <section id=widget-grid  class=""> <div class=row > <article class="col-sm-12 col-md-12 col-lg-12"> <div class="jarviswidget jarviswidget-color-blueLight" id=wid-id-10  data-widget-colorbutton=false  data-widget-editbutton=false  data-widget-togglebutton=false  data-widget-deletebutton=false  data-widget-fullscreenbutton=false  data-widget-custombutton=false  data-widget-sortable=false > <header> <span class=widget-icon > <i class="fa fa-list-alt"></i> </span> <h2>Petunjuk Pengisian</h2> </header> <div> <div class=jarviswidget-editbox > </div> <div class="widget-body no-padding"> <div class="panel-group smart-accordion-default" id=accordion-2 > <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseOne-1" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Fungsi Berita</a></h4> </div> <div id=collapseOne-1  class="panel-collapse collapse"> <div class=panel-body > Untuk menampilkan berita seputar kegiatan di instansi. Berita yang disajikan dapat dilihat juga oleh pengunjung website di instansi lain. <br> Untuk menarik banyak pembaca di website Anda, atau agar jumlah pengunjung website Anda meningkat, sangat disarankan untuk menyajikan berita dalam bentuk yang lengkap dan memiliki unsur-unsur (<b>5W+1H</b>) berikut: <br> <ol> <li>Apa yang terjadi atau apa yang diberitakan? <li>Siapa yang terlibat dalam berita atau siapa yang berbicara? <li>Mengapa kejadian, kegiatan, atau peristiwa tersebut dapat terjadi? <li>Kapan kejadian, kegiatan, atau peristiwanya? <li>Dimana kejadian, kegiatan, atau peristiwanya? <li>Bagaimana deskripsi kejadian, kegiatan atau peristiwa yang telah dijelaskan sebelumnya? </ol> </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseTwo-1" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Mengisi Berita</a></h4> </div> <div id=collapseTwo-1  class="panel-collapse collapse"> <div class=panel-body > <ol> <li> Klik tombol <b>Tambah Data</b> / <b>Edit Data</b>. <li> Input judul berita. <li> Input Isi Berita. <li> Editor di inputan isi berita dapat menampung data seperti : <ul> <li>Teks / tulisan <li>Gambar, <a data-toggle=collapse  data-parent="#accordion-2" href="#collapseUploadViaEditor"><b>Upload Gambar Via Editor</b></a> <li>Preview File Office, <a data-toggle=collapse  data-parent="#accordion-2" href="#collapsePreviewDokumen"><b>Preview Via Dokumen</b></a> <li>Preview File Office dari Google Drive, <a data-toggle=collapse  data-parent="#accordion-2" href="#collapsePreviewGambar"><b>Preview Via Google Drive</b></a> <li>Buat Link ke <a data-toggle=collapse  data-parent="#accordion-2" href="#collapseLinkKeWebsiteLain"><b>Website Lain.</b></a> </ul> <li> Input kategori berita. <li> Input tags berita. Data tags ini dapat dipilih lebih dari satu, dengan cara tekan <b>Ctrl + Klik Tag</b> yang sesuai <li> Input status Berita, <b>Publish</b> atau <b>Draft</b>. <li> Foto untuk slide show. Foto ini akan tampil di halaman depan website. <ul> <li>Foto berjumlah 3 buah, paling tidak ada 1 foto terisi agar memudahkan mengenali berita di halaman depan website. <li><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseCropFoto"><b>Crop Foto</b></a> dengan dimensi <b>720 x 540 Pixel</b>. </ul> <li> Klik tombol <b>Simpan</b> <li> Refresh tampilan website Anda. </ol> <br> Catatan :<br> <b>File Office</b> yang dapat di tampilkan preview nya adalah: pdf, doc, docx, xls, xlsx, ppt, pptx, png, jpg, dll. </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseUploadViaEditor" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Upload Gambar Via Editor</a></h4> </div> <div id=collapseUploadViaEditor  class="panel-collapse collapse"> <div class=panel-body > {% include 'account/snippets/cara-upload-gambar-via-editor.html' %} <hr> <a data-toggle=collapse  data-parent="#accordion-2" href="#collapseTwo-1"><b>&#60;&#60; kembali</b></a> </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapsePreviewDokumen" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Preview Via Dokumen</a></h4> </div> <div id=collapsePreviewDokumen  class="panel-collapse collapse"> <div class=panel-body > {% include 'account/snippets/cara-buat-preview-via-menu-dokumen.html' %} <hr> <a data-toggle=collapse  data-parent="#accordion-2" href="#collapseTwo-1"><b>&#60;&#60; kembali</b></a> </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapsePreviewGambar" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Preview Via Google Drive</a></h4> </div> <div id=collapsePreviewGambar  class="panel-collapse collapse"> <div class=panel-body > {% include 'account/snippets/cara-buat-preview-via-google-drive.html' %} <hr> <a data-toggle=collapse  data-parent="#accordion-2" href="#collapseTwo-1"><b>&#60;&#60; kembali</b></a> </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseCopyURLDokumen" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Copy URL Dokumen</a></h4> </div> <div id=collapseCopyURLDokumen  class="panel-collapse collapse"> <div class=panel-body > {% include 'account/snippets/cara-copy-url-dokumen.html' %} <hr> <a data-toggle=collapse  data-parent="#accordion-2" href="#collapsePreviewDokumen"><b>&#60;&#60; kembali</b></a> </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseLinkKeWebsiteLain" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Buat Link Ke Website Lain</a></h4> </div> <div id=collapseLinkKeWebsiteLain  class="panel-collapse collapse"> <div class=panel-body > {% include 'account/snippets/cara-buat-link-ke-website-lain.html' %} <hr> <a data-toggle=collapse  data-parent="#accordion-2" href="#collapseTwo-1"><b>&#60;&#60; kembali</b></a> </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseCopyFileIDGoogleDrive" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Copy FILE_ID Google Drive</a></h4> </div> <div id=collapseCopyFileIDGoogleDrive  class="panel-collapse collapse"> <div class=panel-body > {% include 'account/snippets/cara-copy-file-id-google-drive.html' %} <hr> <a data-toggle=collapse  data-parent="#accordion-2" href="#collapsePreviewGambar"><b>&#60;&#60; kembali</b></a> </div> </div> </div> <div class="panel panel-default"> <div class=panel-heading > <h4 class=panel-title ><a data-toggle=collapse  data-parent="#accordion-2" href="#collapseCropFoto" class=collapsed > <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Cara Crop Foto</a></h4> </div> <div id=collapseCropFoto  class="panel-collapse collapse"> <div class=panel-body > {% include 'account/snippets/cara-crop-photo.html' %} <hr> <a data-toggle=collapse  data-parent="#accordion-2" href="#collapseTwo-1"><b>&#60;&#60; kembali</b></a> </div> </div> </div> </div> </div> </div> </div> </article> <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class=jarviswidget  id=wid-id-0 > <header> {% for i in menu_aktif %} <span class=widget-icon > {% if i.icon != '' %} <i class="fa-fw fa fa-{{i.icon}}"></i> {% else %} <i class="fa-fw fa fa-home"></i> {% endif %} </span> <h2>{{i.nama}}</h2> {% endfor %} </header> <div> <div class=jarviswidget-editbox > <input class=form-control  type=text > </div> <div class=widget-body > {{ formset_img.management_data }} {% if formset_img.non_form_errors %} <div class="alert alertdanger">{{formset_img.non_form_errors}}</div> {% endif %} {% if form.errors %} {% for field in form %} {% for error in field.errors %} <div class="alert alert-danger"> <strong>{{ field.label }}</strong><span>{{ error|escape }}</strong> </div> {% endfor %} {% endfor %} {% for error in form.non_field_errors %} <div class="alert alert-danger"> <strong>{{ error|escape }}</strong> </div> {% endfor %} {% endif %} {% if mode == '' %} <table id=datatable_tabletools  class="table table-striped table-bordered table-hover" width="100%"> <thead> <tr> <th>ID <th data-hide=expand >Judul <th data-hide="phone,tablet">Isi Berita <th data-hide="phone,tablet">Kategori <th data-hide="phone,tablet">Foto Utama <th data-hide="phone,tablet">Jumlah Foto <th data-hide="phone,tablet">Satus <th data-hide="phone,tablet">Last Update <th>Action </table> {% elif mode|lower == 'add' or mode|lower == 'edit' %} <form class=form-horizontal  method=POST  enctype="multipart/form-data"> {% csrf_token %} <fieldset> <legend>Berita</legend> <div class=form-group > <label class="control-label col-md-1">{{form.judul.label_tag}}</label> <div class=col-md-11 > <div class=row > <div class=col-sm-10 > <div class=input-group > <span class=input-group-addon ><i class="icon-prepend fa fa-user"></i></span> {{form.judul}} </div> </div> </div> </div> </div> <div class=form-group > <label class="control-label col-md-1" for=prepend >{{form.isi_berita.label_tag}}</label> <div class=col-md-11 > <div class=row > <div class=col-sm-10 > <div class=input-group > {{form.isi_berita}} </div> </div> </div> </div> </div> <div class=form-group > <label class="control-label col-md-1" for=prepend >{{form.kategori.label_tag}}</label> <div class=col-md-11 > <div class=row > <div class=col-sm-10 > <div class=input-group > <span class=input-group-addon ><i class="icon-prepend fa fa-map-marker"></i></span> {{form.kategori}} </div> </div> </div> </div> </div> <div class=form-group > <label class="control-label col-md-1" for=prepend >{{form.tags.label_tag}}</label> <div class=col-md-11 > <div class=row > <div class=col-sm-10 > <div class=input-group > <span class=input-group-addon ><i class="icon-prepend fa fa-map-marker"></i></span> {{form.tags}} </div> </div> </div> </div> </div> <div class=form-group > <label class="control-label col-md-1" for=prepend >{{form.status.label_tag}}</label> <div class=col-md-11 > <div class=row > <div class=col-sm-10 > <div class=input-group > <span class=input-group-addon ><i class="icon-prepend fa fa-map-marker"></i></span> {{form.status}} </div> </div> </div> </div> </div> <legend>Foto </legend> {{ formset_img.as_p}} </fieldset> <div class=form-actions > <div class=row > <div class=col-md-12 > <button class="btn btn-primary" type=submit  value=save  name=proses > <i class="icon-prepend fa fa-save"></i> simpan </button> <button class="btn btn-secondary" type=submit  id=cancel-btn  value=cancel  name=proses > <i class="icon-prepend fa fa-ban"></i> batal </button> </div> </div> </div> </form> {% endif %} </div> </div> </div> </article> </div> <div class=row > <div class=col-sm-12 > </div> </div> </section> </div> </div> {% include "account/inc-cropping-form.html" %} {% endblock %} {% block java-script %} var ww, hh; ww = 720; hh = 540; {% endblock %} {% block jquery-doc-ready %} var breakpointDefinition = { tablet : 1024, phone : 480 }; var responsiveHelper_datatable_tabletools = undefined; $('#datatable_tabletools').dataTable({ "deferRender": true, ajax: { "url": "{% url 'berita_ajax' %}", "dataSrc": "", }, columns:[ {data: "id"}, {data: "judul"}, {data: "isi_berita", render: $.fn.dataTable.render.text()}, {data: "kategori__nama"}, {data: "foto"}, {data: "foto_count"}, {data: "status"}, {data: "updated_at"}, {render: function ( data, type, row ) { return "<div class='toolbar text-right'><button onclick='do_edit(" + row.id + ");' class='btn btn-success btn-xs' title='Edit Data'> "+ " <i class='fa fa-edit'></i> "+ "</button> "+ "<button onclick='do_delete(" + row.id + ", \"" + row.judul + "\"" + ");' class='btn btn-danger btn-xs' title='Hapus Data'> "+ " <i class='fa fa-eraser'></i> "+ "</button>"+ "</div>"; } }, ], "order": [[ 0, "desc" ]], "columnDefs": [ { "targets": [ 0 ], "visible": false, "searchable": false }, { "targets": [ 4 ], render: function(data) { if (data != null) { return '<img src="/media/' + data + '" class=img-thumbnail >' } else return 'Tdk ada' } }, ], "sDom": "<'dt-toolbar text-right'<'col-xs-12 col-sm-6 hidden-xs'f><'toolbar'>r>"+ "t"+ "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>", "autoWidth" : true, "oLanguage": { "sSearch": '<span class=input-group-addon ><i class="glyphicon glyphicon-search"></i></span>' }, "preDrawCallback" : function() { if (!responsiveHelper_datatable_tabletools) { responsiveHelper_datatable_tabletools = new ResponsiveDatatablesHelper($('#datatable_tabletools'), breakpointDefinition); } }, "rowCallback" : function(nRow) { responsiveHelper_datatable_tabletools.createExpandIcon(nRow); }, "drawCallback" : function(oSettings) { responsiveHelper_datatable_tabletools.respond(); } }); $("div.toolbar").html( "<a class='btn btn-primary btn-md ' href='add' title='Tambah Data'> " + "<i class='fa fa-plus'></i></a>"); $("#cancel-btn").click(function (event) { var lanjut = false; {% if mode == 'add' %} if (confirm("Batal input data?")) { console.log('delete first!'); console.log(file_path[0]); lanjut = true; } {% elif mode == 'edit' %} if (confirm("Batal edit data?")) { console.log('delete first!'); console.log(file_path[0]); lanjut = true; } {% endif %} if (lanjut) { var formData = new FormData(); formData.append('file_path_0', file_path[0]); formData.append('file_path_1', file_path[1]); formData.append('file_path_2', file_path[2]); let csrftoken = $('input[name="csrfmiddlewaretoken"]').val(); $.ajax('/dashboard/delete-photo/', { method: "POST", data: formData, processData: false, contentType: false, headers:{'X-CSRFToken':csrftoken}, success: function (response) { console.log('response = '); console.log(response); event.preventDefault(); window.location.href = '/dashboard/berita/'; }, error: function () { console.log('Delete error'); } }); }; }); {% for message in messages %} $.smallBox({ title : "<i class='fa fa-desktop'></i> &nbsp;&nbsp; {{message|safe}}", content : "<i class='fa fa-clock-o'></i> <i>Berita</i>", color : "#296191", iconSmall : "fa fa-thumbs-up bounce animated", timeout : 4000 }); {% endfor %} {% endblock %} {% block related-plugin %} <script src="{% static 'account/js/plugin/datatables/jquery.dataTables.min.js' %}"></script> <script src="{% static 'account/js/plugin/datatables/dataTables.colVis.min.js' %}"></script> <script src="{% static 'account/js/plugin/datatables/dataTables.tableTools.min.js' %}"></script> <script src="{% static 'account/js/plugin/datatables/dataTables.bootstrap.min.js' %}"></script> <script src="{% static 'account/js/plugin/datatable-responsive/datatables.responsive.min.js' %}"></script> <script src="{% static 'ckeditor/ckeditor-init.js' %}"></script> <script src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script> {% endblock %}