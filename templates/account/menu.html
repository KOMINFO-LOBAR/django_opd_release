{% extends "account/base-dashboard.html" %}
{% load static %}
{% load humanize %} 

{% block content %}
    <!-- MAIN PANEL -->
    <div id="main" role="main">

        <!-- RIBBON -->
        <div id="ribbon">

            <span class="ribbon-button-alignment"> 
                <span id="refresh" class="btn btn-ribbon" data-action="resetWidgets" data-title="refresh"  rel="tooltip" data-placement="bottom" data-original-title="<i class='text-warning fa fa-warning'></i> Warning! This will reset all your widget settings." data-html="true">
                    <i class="fa fa-refresh"></i>
                </span> 
            </span>

            <!-- breadcrumb -->
            <ol class="breadcrumb">   
                <li>Selamat Datang, {{ user.username|default:'Guest'|title }} - [ {{namaOPD}} ] <!--</li><li>Miscellaneous</li><li>Blank Page</li>-->                
                <!-- {% for i in messages %}
                    {{i}}
                    {% if 'exclamation' in i|safe %}
                        exclamation
                    {% else %}
                        undefined
                    {% endif %}
                {% endfor %} -->
            </ol>
            <!-- end breadcrumb -->

            <!-- You can also add more buttons to the
            ribbon for further usability

            Example below:

            <span class="ribbon-button-alignment pull-right">
            <span id="search" class="btn btn-ribbon hidden-xs" data-title="search"><i class="fa-grid"></i> Change Grid</span>
            <span id="add" class="btn btn-ribbon hidden-xs" data-title="add"><i class="fa-plus"></i> Add</span>
            <span id="search" class="btn btn-ribbon" data-title="search"><i class="fa-search"></i> <span class="hidden-mobile">Search</span></span>
            </span> -->

        </div>
        <!-- END RIBBON -->

        <!-- MAIN CONTENT -->
        <div id="content">

            <!-- row -->
            <div class="row">
                
                <!-- col -->
                <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
                    <h1 class="page-title txt-color-blueDark">
                        
                        <!-- PAGE HEADER -->
                        {% for i in menu_aktif %}
                            {% if i.icon != '' %}
                                <i class="fa-fw fa fa-{{i.icon}}"></i> 
                            {% else %}
                                <i class="fa-fw fa fa-home"></i> 
                            {% endif %}
                                {{i.nama}}
                            <span>>  
                                Grid
                            </span>
                        {% endfor %}
                    </h1>
                </div>
                <!-- end col -->
                
                <!-- right side of the page with the sparkline graphs -->

                <!-- Posisi inline graph -->
                
            </div>
            <!-- end row -->
            
            <!--
                The ID "widget-grid" will start to initialize all widgets below 
                You do not need to use widgets if you dont want to. Simply remove 
                the <section></section> and you can use wells or panels instead 
                -->
            
            <!-- widget grid -->
            <section id="widget-grid" class="">
            
                <!-- row -->
                <div class="row">


                    <!-- NEW WIDGET START -->
                    <article class="col-sm-12 col-md-12 col-lg-12">
                                                                
                        <!-- Widget ID (each widget will need unique ID)-->
                        <div class="jarviswidget jarviswidget-color-blueLight" id="wid-id-10" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" data-widget-sortable="false">                            
                            <header>
                                <span class="widget-icon"> <i class="fa fa-list-alt"></i> </span>
                                <h2>Petunjuk Pengisian</h2>                                
                            </header>

                            <!-- widget div-->
                            <div>

                                <!-- widget edit box -->
                                <div class="jarviswidget-editbox">
                                    <!-- This area used as dropdown edit box -->

                                </div>
                                <!-- end widget edit box -->

                                <!-- widget content -->
                                <div class="widget-body no-padding">

                                    <div class="panel-group smart-accordion-default" id="accordion-2">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapseOne-1" class="collapsed"> <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> 
                                                    Fungsi Menu</a></h4>
                                            </div>
                                            <div id="collapseOne-1" class="panel-collapse collapse">    <!-- tambah in setelah collapse dan class="collapsed" di atas (H4)--> 
                                                <div class="panel-body">

                                                        Untuk menambah atau mengurangi link ke halaman tertentu. Menu ini berhubungan dengan <b>Halaman Statis</b>. <br>
                                                        Menu yang dibuat akan selalu di arahkan ke Halaman Statis.
                                                                                                                                                                        
                                                </div>
                                            </div>
                                        </div>

                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapseTwo-1" class="collapsed"> <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> 
                                                    Cara Mengisi Menu</a></h4>
                                            </div>
                                            <div id="collapseTwo-1" class="panel-collapse collapse">    <!-- tambah in setelah collapse dan class="collapsed" di atas (H4)--> 
                                                <div class="panel-body">
                                                        
                                                        <ol>
                                                            <li> Klik tombol <b>Tambah / Edit Data</b>. </li>
                                                            <li> Atau Klik tombol <b>Tambah Menu</b> di daftar hierarki menu, sesuai dengan menu mana yang ingin di tambahkan <b>Sub Menunya</b></Sub> . </li>
                                                            
                                                            <li> Pilih <b>Parent</b> sebagai induk dari menu yang akan dibuat.</li>
                                                            
                                                            <li> Input Nama Menu.</li>
                                                            <li> Input Order Menu (semakin besar nilainya maka akan menjadi menu dengan urutan paling bawah). </li>
                                                            
                                                            <li> Klik tombol <b>Simpan</b>. </li>   
                                                            <li> Refresh tampilan website Anda. </li>                                                                                                                                                                                
                                                            
                                                        </ol>
                                                        
                                                        Catatan :<br>
                                                        Untuk menghapus menu. Hapus dahulu menu yang berhubungan di <b>Halaman Statis</b>. <br>
                                                        <b>Refresh Menu Default</b> berfungsi untuk menarik semua menu <b>Default</b>. Jika ada menu default yang pernah dihilangkan centang nya, akan muncul kembali.
                                                        <!-- <h3>Contoh Embed:</h3> -->
                                                </div>
                                            </div>
                                        </div>


                                        

                                        

                                        <!-- <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapseTwo-1" class="collapsed"> <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> 
                                                    Cara Membuat Embed Video </a></h4>
                                            </div>
                                            <div id="collapseTwo-1" class="panel-collapse collapse">
                                                <div class="panel-body">
                                                    <ol>
                                                        <li> Upload video di youtube. </li>
                                                        <li> Buka / tonton video Anda di youtube. </li>
                                                        <li> Klik kanan di area video yang sedang Anda tonton. </li>
                                                        <li> Pilih <b>Copy Embed Code</b>. </li>
                                                        <li> Paste di kolom inputan embed di halaman ini. </li>
                                                        <li> Refresh tampilan website Anda. </li>

                                                        

                                                    </ol>

                                                    Catatan :
                                                    <ul>
                                                        <li>Jangan lupa klik tombol <b>Sumber</b> sebelum melakukan paste di editor yang tersedia. </li>                                                        
                                                        <li> Untuk kelengkapan video, copy juga judul video di youtube, paste di kolom inputan judul di halaman ini. </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div> -->
                                        <!-- <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapseThree-1" class="collapsed"> <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i> Collapsible Group Item #3 </a></h4>
                                            </div>
                                            <div id="collapseThree-1" class="panel-collapse collapse">
                                                <div class="panel-body">
                                                    Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et.
                                                </div>
                                            </div>
                                        </div> -->
                                    </div>

                                </div>
                                <!-- end widget content -->

                            </div>
                            <!-- end widget div -->

                        </div>
                        <!-- end widget -->

                    </article>
                    <!-- WIDGET END -->    


                    
                    <!-- NEW WIDGET START -->
                    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        
                        <!-- Widget ID (each widget will need unique ID)-->
                        <div class="jarviswidget" id="wid-id-0">
                            <!-- widget options:
                                usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
                                
                                data-widget-colorbutton="false"	
                                data-widget-editbutton="false"
                                data-widget-togglebutton="false"
                                data-widget-deletebutton="false"
                                data-widget-fullscreenbutton="false"
                                data-widget-custombutton="false"
                                data-widget-collapsed="true" 
                                data-widget-sortable="false"
                                
                            -->
                            <header>
                                {% for i in menu_aktif %}
                                    <span class="widget-icon"> 
                                    {% if i.icon != '' %}
                                        <i class="fa-fw fa fa-{{i.icon}}"></i> 
                                    {% else %}
                                        <i class="fa-fw fa fa-home"></i> 
                                    {% endif %}
                                    </span>

                                    <h2>{{i.nama}}</h2>
                                    
                                {% endfor %}			
                                
                            </header>
            
                            <!-- widget div-->
                            <div>
                                
                                <!-- widget edit box -->
                                <div class="jarviswidget-editbox">
                                    <!-- This area used as dropdown edit box -->
                                    <input class="form-control" type="text">	
                                </div>
                                <!-- end widget edit box -->
                                
                                <!-- widget content -->
                                <div class="widget-body">
                                    
                                    {% if form.errors %}
                                        {% for field in form %}
                                            {% for error in field.errors %}
                                                <div class="alert alert-danger">
                                                    <strong>{{ field.label }}</strong><span>{{ error|escape }}</strong>
                                                </div>
                                            {% endfor %}
                                        {% endfor %}
                                        {% for error in form.non_field_errors %}
                                            <div class="alert alert-danger">
                                                <strong>{{ error|escape }}</strong>
                                            </div>
                                        {% endfor %}
                                    {% endif %}

                                    <!-- {% comment %} tanggal = {{tanggal}} <br>
                                    tanggal = {{tanggal|naturaltime}} {% endcomment %} -->
                                    {% if mode == '' %}
                                        <table id="datatable_tabletools" class="table table-striped table-bordered table-hover" width="100%">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>                                                    
                                                    <th data-hide="expand">Parent</th>
                                                    <th data-hide="expand">Menu Khusus</th>                                            
                                                    <th data-hide="phone,tablet">Link</th>                                                    
                                                    <!-- <th data-hide="phone,tablet">Icon</th>  -->
                                                    <th data-hide="phone,tablet">Last Update</th>                                                
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>

                                        <br>
                                        <div class="text-right" id="refresh_menu">
                                            <!-- <a href="/dashboard/refresh-menu">
                                                <i class="fa fa-refresh"></i> &nbsp; Refresh Menu Default                                                           
                                            </a> -->
                                            <a href="#" onclick="notify_refresh()">
                                                <i class="fa fa-refresh"></i> &nbsp; Refresh Menu Default                                                           
                                            </a>
                                        </div>

                                        <div class="tree smart-form">
											<ul><li>
                                                <span>
                                                    <label class="checkbox inline-block">
                                                        <input type="checkbox" name="checkbox-inline" checked>
                                                        <i></i> &nbsp; Menu Default 
                                                    </label>
                                                </span> <!--fa-folder-open-->
                                                <ul>                                                                                               
                                                    {% for n in menu_master %}    						
                                                        <li>
                                                        <span>
                                                            <label class="checkbox inline-block">
                                                                <input type="checkbox" name="checkbox-inline" id={{n.id}} {% if n.is_visibled %} checked {% endif %}> 
                                                                <i></i> &nbsp; {{n.nama}} &nbsp;
                                                            </label>     
                                                        </span>
                                                        
                                                        <!-- mulai tag child -->
                                                        {% if n.haveChild == 1 %} <ul> {% else %}  
                                                            <ul>
                                                                <li><span><a href="/dashboard/menu/parent/{{n.id}}">
                                                                    Tambah Menu ...                                                          
                                                                </a></span></li>
                                                            </ul></li>
                                                        {% endif %} 						
                                                        {% if n.haveChildEndTag > 0 %} 
                                                            <li><span><a href="/dashboard/menu/parent/{{n.parent_id}}">
                                                                    Tambah Menu ...                                                          
                                                            </a></span></li>
                                                            {% if n.haveChildEndTag >= 3 %} </ul></li> {% endif %}
                                                            {% if n.haveChildEndTag >= 2 %} </ul></li> {% endif %}
                                                            {% if n.haveChildEndTag >= 1 %} </ul></li> {% endif %}        
                                                        {% endif %}
                                                        
                                                        <!-- end tag child -->
                                                    {% endfor %}
                                                    <li><span><a href="/dashboard/menu/parent/{{n.parent_id}}">
                                                        Tambah Menu ...                                                          
                                                    </a></span></li>
                                                </ul>
                                            </li></ul>
                                        </div>





                                    {% elif  mode|lower == 'add' or mode|lower == 'edit' or mode|lower == 'parent' %}
                                        <form class="form-horizontal" method="POST" enctype="multipart/form-data"> 
                                            {% csrf_token %}
                                            <fieldset>    
                                                <div class="form-group">													
                                                    <label class="control-label col-md-1" for="prepend">{{form.parent.label_tag}}</label>
                                                    <div class="col-md-11">
                                                        <div class="row">
                                                            <div class="col-sm-12">                                
                                                                <div class="input-group">
                                                                    <span class="input-group-addon"><i class="icon-prepend fa fa-map-marker"></i></span>						<!--onclick="init_select2_provinsi()"-->											
                                                                    {{form.parent}}
                                                                </div>                              
                                                            </div>                              
                                                        </div>
                                                    </div>                        
                                                </div> 

                                                <div class="form-group">
                                                    <label class="control-label col-md-1">{{form.nama.label_tag}}</label>
                                                    <div class="col-md-11">
                                                        <div class="row">
                                                            <div class="col-sm-12">                                
                                                                <div class="input-group">
                                                                    <span class="input-group-addon"><i class="icon-prepend fa fa-user"></i></span>																	
                                                                    {{form.nama}}                                    
                                                                </div>
                                                            </div>                            
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!--<div class="form-group">													
                                                    <label class="control-label col-md-3" for="prepend">{{form.href.label_tag}}</label>
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-sm-10">                                
                                                                <div class="input-group">
                                                                    <span class="input-group-addon"><i class="icon-prepend fa fa-map-marker"></i></span>						
                                                                    {{form.href}}
                                                                </div>                              
                                                            </div>                              
                                                        </div>
                                                    </div>                        
                                                </div> -->

                                                <div class="form-group">													
                                                    <label class="control-label col-md-1" for="prepend">{{form.icon.label_tag}}</label>
                                                    <div class="col-md-11">
                                                        <div class="row">
                                                            <div class="col-sm-12">                                
                                                                <div class="input-group">
                                                                    <span class="input-group-addon"><i class="icon-prepend fa fa-map-marker"></i></span>						<!--onclick="init_select2_provinsi()"-->											
                                                                    {{form.icon}}
                                                                </div>                              
                                                            </div>                              
                                                        </div>
                                                    </div>                        
                                                </div> 
                                                
                                                <div class="form-group">													
                                                    <label class="control-label col-md-1" for="prepend">{{form.order_menu.label_tag}}</label>
                                                    <div class="col-md-11">
                                                        <div class="row">
                                                            <div class="col-sm-12">                                
                                                                <div class="input-group">
                                                                    <span class="input-group-addon"><i class="icon-prepend fa fa-map-marker"></i></span>						<!--onclick="init_select2_provinsi()"-->											
                                                                    {{form.order_menu}}
                                                                </div>                              
                                                            </div>                              
                                                        </div>
                                                    </div>                        
                                                </div> 

                                                <!--
                                                <div class="form-group">													
                                                    <label class="control-label col-md-3" for="prepend">{{form.is_visibled.label_tag}}</label>
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-sm-10">                                
                                                                <div class="input-group">
                                                                    
                                                                        <label>
                                                                            
                                                                            {{form.is_visibled}}
                                                                            
                                                                        </label>
                                                                    
                                                                    
                                                                </div>                              
                                                            </div>                              
                                                        </div>
                                                    </div>                        
                                                </div> -->

                                                
                                            </fieldset>

                                            <div class="form-actions">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        
                                                        <button class="btn btn-primary" type="submit" value="save" name="proses">                                                                								
                                                            <i class="icon-prepend fa fa-save"></i> simpan
                                                        </button>
                                                        <!--<button class="btn btn-success" type="submit" value="save_add_new" name="proses">                                                                								
                                                            <i class="icon-prepend fa fa-save"></i> simpan & input baru
                                                        </button>							-->
                                                        <button class="btn btn-secondary" type="submit" id="cancel-btn" value="cancel" name="proses">
                                                            <i class="icon-prepend fa fa-ban"></i> batal                                                           
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>  
                                    {% endif %}
            
                                </div>
                                <!-- end widget content -->
                                
                            </div>
                            <!-- end widget div -->
                            
                        </div>
                        <!-- end widget -->
            
                    </article>
                    <!-- WIDGET END -->
                    
                </div>
            
                <!-- end row -->
            
                <!-- row -->
            
                <div class="row">
            
                    <!-- a blank row to get started -->
                    <div class="col-sm-12">
                        <!-- your contents here -->
                    </div>
                        
                </div>
            
                <!-- end row -->
            
            </section>
            <!-- end widget grid -->

        </div>
        <!-- END MAIN CONTENT -->

    </div>
    <!-- END MAIN PANEL -->
{% endblock %}

<!-- di luar doc ready -->

<!-- function do_delete(pPk, pName) {
    if (confirm('Anda yakin menghapus data "'+ pName + '"?')) {
        $.ajax({
            url: "/enc_text/" + pPk, 
            success: function(result){                    
                window.location.href = 'delete/' + result;
            }
        });            
    };
}; 

function do_edit(pPk) {        
    $.ajax({
        url: "/enc_text/" + pPk, 
        success: function(result){                
            window.location.href = 'edit/' + result;
         }
    });              
};  -->

{% block java-script %}


    function notify_refresh() {
        if (confirm('Refresh menu default? Menu yang telah dihilangkan centangnya akan kembali lagi.')) {
            // alert('/dashboard/refresh-menu');

            window.location.href = '/dashboard/refresh-menu';
            $("#refresh_menu").hide();
        }        
    };
{% endblock %}

{% block jquery-doc-ready %}
    var breakpointDefinition = {
        tablet : 1024,
        phone : 480
    };

    var responsiveHelper_datatable_tabletools = undefined;
    $('#datatable_tabletools').dataTable({
        //"processing": true,
        ajax: {            
            //"processing": true,
            "url": "{% url 'menu_ajax' %}",
            "dataSrc": ""
        },
        columns:[
            {data: "id"},         
            {data: "parent__nama"},   
            {data: "nama"},
            {data: "href"},            
            //{data: "icon"},            
            {data: "updated_at"},                   
            {render: function ( data, type, row ) {
                //console.log('data');
                //console.log(row);
                //foreach i in row {
                //    console.log(i.updated_at);
                //}

                return "<div class='toolbar text-right'><button onclick='do_edit(" + row.id + ");' class='btn btn-success btn-xs' title='Edit Data'> "+
                       "    <i class='fa fa-edit'></i> "+                                                           
                       "</button> "+
                       "<button onclick='do_delete(" + row.id + ", \"" + row.nama + "\"" + ");' class='btn btn-danger btn-xs' title='Hapus Data'> "+
                       "    <i class='fa fa-eraser'></i> "+                                                           
                       "</button>"+
                       "</div>";
                }
            },      
        ],     
        "order": [[ 1, "asc" ]],   
        "columnDefs": [
            {
                "targets": [ 0 ],
                "visible": false,
                "searchable": false
            },            
            //{   "targets": [ 3 ], render:function(data){
                    //return moment(data).format('MMMM Do YYYY');
            //        return data
            //    }
            //}, bisa di lakukan di view (from django.contrib.humanize.templatetags.humanize import naturalday)
        ],        
        
        "sDom": "<'dt-toolbar text-right'<'col-xs-12 col-sm-6 hidden-xs'f><'toolbar'>r>"+                
                "t"+
                "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",      
        "autoWidth" : true,
        "oLanguage": {
            "sSearch": '<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>'
        },		            
        "preDrawCallback" : function() {
            // Initialize the responsive datatables helper once.
            if (!responsiveHelper_datatable_tabletools) {
                responsiveHelper_datatable_tabletools = new ResponsiveDatatablesHelper($('#datatable_tabletools'), breakpointDefinition);
            }
        },
        "rowCallback" : function(nRow) {
            responsiveHelper_datatable_tabletools.createExpandIcon(nRow);
        },
        "drawCallback" : function(oSettings) {
            responsiveHelper_datatable_tabletools.respond();
        }

    });

    // document ready
    $("div.toolbar").html(
        "<a class='btn btn-primary btn-md ' href='add' title='Tambah Data'> " +
        "<i class='fa fa-plus'></i></a>");

    {% if parent_id %}
        $("#id_parent").val("{{parent_id}}").change();    
        //alert($("#id_parent").html());
    {% endif %}

    //$("#refresh_menu").click(function (event) {
    //    $(this).hide();
    //});

    $("#cancel-btn").click(function (event) {
        {% if mode == 'add' or mode == 'parent' %}
            if (confirm("Batal input data?")) {
                event.preventDefault();        
                window.history.back(); 
            }       
        {% elif mode == 'edit' %}
            if (confirm("Batal edit data?")) {
                event.preventDefault();        
                window.history.back(); 
            }   
        {% endif %}    
    });

    $('.tree > ul').attr('role', 'tree').find('ul').attr('role', 'group');
    $('.tree').find('li:has(ul)').addClass('parent_li').attr('role', 'treeitem').find(' > span').attr('title', 'Collapse this branch').on('click', function(e) {
        var children = $(this).parent('li.parent_li').find(' > ul > li');
        var parent = $(this);
    
        if (children.is(':visible')) {
            //children.hide('fast');
            //$(this).attr('title', 'Expand this branch').find(' > i').removeClass().addClass('fa fa-lg fa-plus-circle');
            //$(this).attr('title',bgYzw 'Expand this branch').find("input[type='checkbox']").hide();
            children.find("input[type='checkbox']").prop('checked', parent.find("input[type='checkbox']").prop("checked")).change();
        //} else {
            //children.show('fast');
        //    $(this).attr('title', 'Collapse this branch').find(' > i').removeClass().addClass('fa fa-lg fa-minus-circle');
        }
        e.stopPropagation();
    });	

    $('.tree').find('li:has(ul)').addClass('parent_li').attr('role', 'treeitem').find(' > span').attr('title', 'Collapse this branch').on('change', function(e) {	
        var pk = $(this).find("input[type='checkbox']").attr("id");
        var is_visible = 0; 
        if ($(this).find("input[type='checkbox']").prop("checked")) 
            is_visible = 1;

        $.ajax({
            url: "/dashboard/menu_update_visibled/" + pk + "/" + is_visible, 
            //success: function(result){                    
                // window.location.href = 'delete/' + result;
            //    console.log(result);
            //}
        })
        
    });
    	

    {% for message in messages %}    
        {% if 'fa-exclamation-circle' in message|safe %}                                    		
            $.smallBox({
                title : "<i class='fa fa-desktop'></i> &nbsp;&nbsp; {{message|safe}}",
                content : "<i class='fa fa-clock-o'></i> <i>Menu</i>",
                color : "#C46A69",
                iconSmall : "fa fa-warning shake animated", 
                timeout : 4000
            });
        {% else %}        
            $.smallBox({
                title : "<i class='fa fa-desktop'></i> &nbsp;&nbsp; {{message|safe}}",
                content : "<i class='fa fa-clock-o'></i> <i>Menu</i>",
                color : "#296191",
                iconSmall : "fa fa-thumbs-up bounce animated",
                timeout : 4000
            });
        {% endif %}
    {% endfor %}
{% endblock %}

{% block related-plugin %}        
    <script src="{% static 'account/js/plugin/datatables/jquery.dataTables.min.js' %}"></script>
	<script src="{% static 'account/js/plugin/datatables/dataTables.colVis.min.js' %}"></script>
	<script src="{% static 'account/js/plugin/datatables/dataTables.tableTools.min.js' %}"></script>
	<script src="{% static 'account/js/plugin/datatables/dataTables.bootstrap.min.js' %}"></script>
	<script src="{% static 'account/js/plugin/datatable-responsive/datatables.responsive.min.js' %}"></script>
{% endblock %}